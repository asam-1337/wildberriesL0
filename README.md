# Wildberries L0
## Запуск
1. Склонируйте репозиторий и перейдите в папку с ним.
    ```bash
    git clone https://github.com/asam-1337/wildberriesL0.git
    cd wildberriesL0
    ```
2. Добавте переменные окружения `POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD` в файл `db.env`
3. Запустите докер-образы базы данных и nats-streaming-server
    ```bash
    make docker-compose-up
    ```
4. Скачайте необходимые зависимости.
    ```bash
    go mod tidy
    ```
5. Запустите сервер
    ```bash
    make run
    ```
   опубликуйте в канал тестовые записи
    ```bash
    make publish
    ```

## Описание
1. Подключение и подписка на канал в nats-streaming
2. Полученные данные пишутся в Postgres и сохраняются in memory(Кэш)
3. Каждое полученное сообщение валидируется
4. В случае падения сервиса Кеш восстанавливается из Postgres
5. http сервер выдает данные по id из кеша
6. Интерфейс сделан с использованием шаблонов
7. При падении сервиса данные не доставленные изначально доставятся поскольку подписка долговременная